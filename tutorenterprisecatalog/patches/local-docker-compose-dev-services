enterprise-catalog:
  environment:
    DJANGO_SETTINGS_MODULE: enterprise_catalog.settings.tutor.development
  command: python3 manage.py runserver 0.0.0.0:8160
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "enterprise-catalog") %}
  volumes:
    - {{ mount }}
  {%- endfor %}
  ports:
    - "8160:8160"
  networks:
    default:
      aliases:
        - "{{ ENTERPRISE_CATALOG_HOST }}"

enterprise-catalog-worker:
  environment:
    DJANGO_SETTINGS_MODULE: enterprise_catalog.settings.tutor.celery_development
  ports:
    - "8161:8161"
  command: celery --app=enterprise_catalog.celery:app worker -l DEBUG
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "enterprise-catalog") %}
  volumes:
    - {{ mount }}
  {%- endfor %}

license-manager:
  environment:
    DJANGO_SETTINGS_MODULE: license_manager.settings.tutor.development
  command: python3 manage.py runserver 0.0.0.0:8170
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "license-manager") %}
  volumes:
    - {{ mount }}
  {%- endfor %}
  ports:
    - "8170:8170"
  networks:
    default:
      aliases:
        - "{{ LICENSE_MANAGER_HOST }}"

license-manager-worker:
  environment:
    DJANGO_SETTINGS_MODULE: license_manager.settings.tutor.celery_development
  ports:
    - "8171:8171"
  command: celery --app=license_manager.celery:app worker -Q license_manager.default -l DEBUG
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "license-manager") %}
  volumes:
    - {{ mount }}
  {%- endfor %}

license-manager-bulk-enrollment-worker:
  environment:
    DJANGO_SETTINGS_MODULE: license_manager.settings.tutor.celery_development
  ports:
    - "8172:8172"
  command: celery --app=license_manager.celery:app worker -Q license_manager.bulk_enrollment -l DEBUG
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "license-manager") %}
  volumes:
    - {{ mount }}
  {%- endfor %}

enterprise-access:
  environment:
    DJANGO_SETTINGS_MODULE: enterprise_access.settings.tutor.development
  command: python3 manage.py runserver 0.0.0.0:8270
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "enterprise-access") %}
  volumes:
    - {{ mount }}
  {%- endfor %}
  ports:
    - "8270:8270"
  networks:
    default:
      aliases:
        - "{{ ENTERPRISE_ACCESS_HOST }}"

enterprise-access-worker:
  environment:
    DJANGO_SETTINGS_MODULE: enterprise_access.settings.tutor.celery_development
  ports:
    - "8271:8271"
  command: celery --app=enterprise_access.celery:app worker -l DEBUG
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "enterprise-access") %}
  volumes:
    - {{ mount }}
  {%- endfor %}

enterprise-subsidy:
  environment:
    DJANGO_SETTINGS_MODULE: enterprise_subsidy.settings.tutor.development
  command: python3 manage.py runserver 0.0.0.0:8280
  stdin_open: true
  tty: true
  {%- for mount in iter_mounts(MOUNTS, "enterprise-subsidy") %}
  volumes:
    - {{ mount }}
  {%- endfor %}
  ports:
    - "8280:8280"
  networks:
    default:
      aliases:
        - "{{ ENTERPRISE_SUBSIDY_HOST }}"
